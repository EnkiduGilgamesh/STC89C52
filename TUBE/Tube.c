#include "reg52.h"

// 0~F
unsigned char SMGNoDot_CA[16] = {0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,0x8e};
unsigned char SMGDot_CA[16] = {0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,0x8e};
unsigned char SMGNoDot_CC[16] = {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};
unsigned char SMGDot_CC[16] = {0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef,0xf7,0xfc,0xb9,0xde,0xf9,0xf1};

sbit C1 = P2^7;
sbit C2 = P2^6;
sbit C3 = P2^5;
sbit C4 = P2^4;

void delay(unsigned int t){
	while(t--);
}

void displayNum(unsigned i){
	P0 = SMGNoDot_CA[i];
}

void displayNumDot(unsigned i){
	P0 = SMGDot_CA[i];
}

void displayTube(){
	char i;
	P2 = 0x00;
	C1 = 1;
	for(i = 0; i < 10; i++){
		displayNum(i);
		delay(50000);
	}
	C2 = 1;
	for(i = 0; i < 10; i++){
		displayNum(i);
		delay(50000);
	}
	C3 = 1;
	for(i = 0; i < 10; i++){
		displayNum(i);
		delay(50000);
	}
	C4 = 1;
	for(i = 0; i < 10; i++){
		displayNum(i);
		delay(50000);
	}
}

void main(){
	
	while(1){
		delay(10000);
		displayTube();
	}
}